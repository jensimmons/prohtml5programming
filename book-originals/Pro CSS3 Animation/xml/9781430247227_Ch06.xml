<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE Chapter PUBLIC "-//Springer-Verlag//DTD A++ V2.4//EN" "http://devel.springer.de/A++/V2.4/DTD/A++V2.4.dtd"> <Chapter  Language="En" OutputMedium="All" ID="b9781430247227_6"><ChapterInfo Language="En" ChapterType="OriginalPaper" NumberingStyle="ChapterOnly" TocLevels="0" ContainsESM="No" OutputMedium="All"><ChapterID>6</ChapterID><ChapterNumber>Chapter 6</ChapterNumber><ChapterDOI>10.1007/9781430247227_6</ChapterDOI><ChapterSequenceNumber>0</ChapterSequenceNumber><ChapterTitle Language="En">CSS3 Keyframe Animations<IndexTerm><Primary><Emphasis Type="Bold">CSS3 Keyframe Animations</Emphasis></Primary></IndexTerm> for Web Content</ChapterTitle><ChapterFirstPage>85</ChapterFirstPage><ChapterLastPage>102</ChapterLastPage><ChapterCopyright><CopyrightHolderName>Springer-Verlag</CopyrightHolderName><CopyrightYear><?InsertOnReleaseOF CopyrightYear?></CopyrightYear></ChapterCopyright><ChapterHistory><OnlineDate><Year><?InsertOnReleaseOF OFYear?></Year><Month><?InsertOnReleaseOF OFMonth?></Month><Day><?InsertOnReleaseOF OFDay?></Day></OnlineDate></ChapterHistory></ChapterInfo><ChapterHeader><Abstract ID="Abs1" Language="En" OutputMedium="Online"><Heading>Abstract</Heading><Para>As you saw in the previous chapter, the syntax of the CSS Animation module is more powerful than the Transitions syntax, allowing for far greater control of web content through the use of keyframes. This chapter will illustrate that power through several examples: a cycling slideshow, an image gallery that duplicates the appearance of the classic Lightbox plug-in for JavaScript, and a merged animation to produce an effect of autumn falling leaves.</Para></Abstract></ChapterHeader><Body><Para>As you saw in the previous chapter, the syntax of the CSS Animation module is more powerful than the Transitions syntax, allowing for far greater control of web content through the use of keyframes. This chapter will illustrate that power through several examples: a cycling slideshow, an image gallery that duplicates the appearance of the classic Lightbox plug-in for JavaScript, and a logo animation.</Para><Section1 ID="Sec1"><Heading>A Simple CSS3 Slideshow<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>CSS3 slideshow</Secondary></IndexTerm></Heading><Para>Traditionally, image gallery slideshow effects were created using Flash or JavaScript, often in the form of a framework plug-in, such as Nivo Slider (<ExternalRef><RefSource>http://nivo.dev7studios.com</RefSource><RefTarget TargetType="URL" Address="http://nivo.dev7studios.com"/></ExternalRef>) and Camera (<ExternalRef><RefSource>www.pixedelic.com/plugins/camera</RefSource><RefTarget TargetType="URL" Address="http://www.pixedelic.com/plugins/camera"/></ExternalRef>). While there are advantages to using a framework/plug-in approach (primarily in the variety of transitions available), there are a number of advantages in completing your slideshow in CSS3 too, as you&#x2019;ll see in a moment.</Para><Section2 ID="Sec2"><Heading>The HTML Code<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>CSS3 slideshow</Secondary><Tertiary>HTML code</Tertiary></IndexTerm></Heading><Para>Marking up the images for a CSS3 slideshow is a fairly straightforward process: you place the images inside a container which moves as a strip through another &#x201C;window&#x201D; element that is the same size as each individual image in the strip (see Figure <InternalRef RefID="Fig1">6-1</InternalRef>).<Figure ID="Fig1" Float="Yes" Category="Standard"><Caption Language="En"><CaptionNumber>Figure 6-1</CaptionNumber>.&#x2002;<CaptionContent><SimplePara><Emphasis Type="Italic">Organization of a CSS slideshow (red &#x201C;window&#x201D; container drawn larger for emphasis)</Emphasis></SimplePara></CaptionContent></Caption><MediaObject ID="MO1"><ImageObject FileRef="9781430247227_Fig06-01.gif" Format="GIF" Color="BlackWhite" Type="Linedraw" Rendition="HTML"/></MediaObject></Figure></Para><Para>In code, this is created using Listing 6-1, to which more markup will be added in further examples,</Para><Para><Emphasis Type="BoldItalic">Listing 6-1.</Emphasis>&#x2002;<Emphasis Type="Italic">HTML Code for a Basic CSS3 Slideshow</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div id=slideshow&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;figure id=imagestrip&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=black-kite.jpg alt=&quot;Photograph of a Black kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=red-kite.jpg alt=&quot;Profile of a Red kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=pelicans.jpg alt=&quot;Pelicans on moorings at sea&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=pariah-kite.jpg alt=&quot;Photograph of Pariah kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para>In this example, you have four images at 400 pixels high by 500 pixels wide, so the total width of your inner container must be 2000 pixels. (Note that all of the images must be the exact same size; the images in the example shown are by Challiyil Eswaramangalath Pavithran Vipin, Ariful H Bhuiyan, M&#x00E1;rcio Cabral de Moura, and Alan Saunders, licensed under Creative Commons and used with permission).</Para><Para>The basic CSS, shown in Listing 6-2, is similarly straightforward:</Para><Para><Emphasis Type="BoldItalic">Listing 6-2.</Emphasis>&#x2002;<Emphasis Type="Italic">Base CSS Code for a CSS3 Slideshow Image Gallery</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#slideshow { position: relative; background: #000; overflow: hidden; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip, div#slideshow { box-sizing: border-box; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#slideshow, figure#imagestrip img { width: 500px; height: 400px; float: left; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip { position: absolute; width: 2000px; margin: 0; }</Emphasis></Para><Para>To create the simplest slider animation you must move the inner figure horizontally in increments of 500 pixels, with a pause after each movement to allow the viewer time to appreciate each picture. As I discussed in the previous chapter, CSS3 Animations do not work in explicit frames. You must treat the animation as a division of time: for each image you designate an equal amount of time during which it will be still with the remaining time designated for motion. In this example, each image will be still for 20% of the time, and the strip as a whole will be in motion for 20% of the time, divided into four sequences. Thus each interstitial movement will take 5% of the overall time.</Para><Para>The important part to remember when writing the keyframes is that properties you change <Emphasis Type="Italic">must</Emphasis> be present as a set value between multiple keyframes if you wish to keep them the same; otherwise, the browser will revert to interpolation using values you don&#x2019;t wish it to use.</Para><Para>Your first attempt at the keyframe declaration might look something like Listing 6-3.</Para><Para><Emphasis Type="BoldItalic">Listing 6-3.</Emphasis>&#x2002;<Emphasis Type="Italic">Keyframes for a Simple Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes slider {</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">0%  { transform: translateX(0px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">20% { transform: translateX(0px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">25% { transform: translateX(&#x2212;500px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">45% { transform: translateX(&#x2212;500px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">50% { transform: translateX(&#x2212;1000px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">70% { transform: translateX(&#x2212;1000px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">75% { transform: translateX(&#x2212;1500px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">95% { transform: translateX(&#x2212;1500px); }</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">100% { transform: translateX(&#x2212;2000px); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Then you call the animation sequence. Unlike transitions, keyframe animations do not require an initiating event, meaning that this animation will run on page load, as shown in Listing 6-4.</Para><Para><Emphasis Type="BoldItalic">Listing 6-4.</Emphasis>&#x2002;<Emphasis Type="Italic">Keyframes for a Simple Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip { animation: slider 10s infinite; }</Emphasis></Para><Para>You&#x2019;ll find that this works, but there&#x2019;s just one problem: the last movement on the end reveals an empty window, as there is no image beyond 2000 pixels for the image strip to show. You fix this by introducing a bit of a cheat, placing a copy of the first image at the end of the strip, lengthening the strip as a whole to 2500 pixels in our CSS (Listing 6-5).</Para><Para><Emphasis Type="Italic">Listing 6-5.&#x2002;Modified HTML Code for a Basic CSS3 Slideshow</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div id=slideshow&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;figure id=imagestrip&#x003E;</Emphasis></Para><Para Type="Programcode">       <Emphasis FontCategory="NonProportional">&#x003C;img src=black-kite.jpg alt=&quot;Photograph of a Black kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=red-kite.jpg alt=&quot;Profile of a Red kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=pelicans.jpg alt=&quot;Pelicans on moorings at sea&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=pariah-kite.jpg alt=&quot;Photograph of Pariah kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=black-kite.jpg alt=&quot;Photograph of a Black kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para>As the last keyframe now visually matches the first, this creates a complete smooth animation sequence.</Para></Section2><Section2 ID="Sec3"><Heading>A Variation with Background Images<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>CSS3 slideshow</Secondary><Tertiary>background image</Tertiary></IndexTerm></Heading><Para>You can create an equivalent effect using only background images&#x2014;for example, to create a slideshow behind a banner element or logo. This will simplify your code to a single <Emphasis FontCategory="NonProportional">&#x003C;figure&#x003E;</Emphasis>, but will complicate your CSS somewhat. (Note that you will repeat the first image at the end of the background list just as you did in the above examples, and for the same reason. See Listing 6-6.)</Para><Para><Emphasis Type="BoldItalic">Listing 6-6.</Emphasis>&#x2002;<Emphasis Type="Italic">HTML and CSS Code for a Slider Using Background Images</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;style&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip { width: 500px; height: 400px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">background: #000; box-sizing: border-box;</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">background-image: url(black-kite.jpg), url(red-kite.jpg), url(pelicans.jpg),&#xF0C9; url(pariah-kite.jpg), url(black-kite.jpg);</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">background-repeat: no-repeat;</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">background-position-x: 0, 500px, 1000px, 1500px, 2000px;</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">animation: slider 20s infinite;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes slider {</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">0%  { background-position-x: 0, 500px, 1000px, 1500px, 2000px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">20% { background-position-x: 0, 500px, 1000px, 1500px, 2000px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">25% { background-position-x: -500px, 0px, 500px, 1000px, 1500px, 2000px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">45% { background-position-x: -500px, 0px, 500px, 1000px, 1500px, 2000px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">50% { background-position-x: -1000px, -500px, 0px, 500px, 1000px, 1500px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">70% { background-position-x: -1000px, -500px, 0px, 500px, 1000px, 1500px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">75% { background-position-x: -1500px, -1000px, -500px, 0px, 500px, 1000px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">95% { background-position-x: -1500px, -1000px, -500px, 0px, 500px, 1000px; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">100% { background-position-x: -2000px, -1500px, -1000px, -500px, 0px, 500px; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/style&#x003E;</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;figure id=imagestrip&#x003E;&#x003C;/figure&#x003E;</Emphasis></Para><Para>You could also create a single container element with multiple background images and move it through a visible &#x201C;window&#x201D;, or make a single image for the background that joins all of the images together. The latter approach will make the CSS easier, but will also make it substantially more difficult to change the gallery later.</Para></Section2></Section1><Section1 ID="Sec4"><Heading>Pausing the Slideshow<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>pausing slideshow</Secondary></IndexTerm></Heading><Para>It&#x2019;s reasonable to allow the user to pause the slider to focus on one image. The easiest way to initiate such an action is a <Emphasis FontCategory="NonProportional">hover</Emphasis> on the slider itself; at the same time, you should place a visual identifier on the slideshow to clearly indicate that it is in a paused state. For this example, I&#x2019;ll do so by fading the <Emphasis FontCategory="NonProportional">imagestrip</Emphasis> element and placing a text substitute for a pause icon on the screen as a pseudo-element (I could also use an image file). All of the changes are additions to the CSS, as shown in Listing 6-7.</Para><Para><Emphasis Type="BoldItalic">Listing 6-7.</Emphasis>&#x2002;<Emphasis Type="Italic">CSS Code to Pause an Image Gallery Slideshow on hover</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#slideshow:hover figure#imagestrip { animation-play-state:paused; opacity: 0.5; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#slideshow:hover:before {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">content: &quot;&#x275A;&#x275A;&quot;; font-size: 200px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">color: rgba(255,255,255, 0.7);</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">position: absolute;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">left: 160px; top: 80px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Note that you could ease in the visual identifiers of the paused state by placing an appropriate transition on the inner <Emphasis FontCategory="NonProportional">figure</Emphasis> element, such as <Emphasis FontCategory="NonProportional">transition: 1s opacity linear</Emphasis>.</Para></Section1><Section1 ID="Sec5"><Heading>Altering the Transition Between Images<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary></IndexTerm></Heading><Para>Ultimately there are many possible kinds of fades and wipes between each image in your slider gallery, a few of which are shown next.</Para><Section2 ID="Sec6"><Heading>Fade-In-Out<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary><Tertiary>Fade-In-Out</Tertiary></IndexTerm></Heading><Para>After a simple horizontal or vertical crawl, the most common transition for a slider is to have each image fade to/from black in sequence. Without altering the markup, you could fade the image strip out, move the image strip &#x201C;under cover of darkness&#x201D; while it is black and then fade the strip in as a whole again, as shown in Listing 6-8.</Para><Para><Emphasis Type="BoldItalic">Listing 6-8.</Emphasis>&#x2002;<Emphasis Type="Italic">CSS Code to Pause an Image Gallery Slideshow on hover</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes slider {</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">0%  { transform: translateX(0); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">20% { opacity: 1; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">22% { opacity: 0; transform: translateX(0); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">23% { opacity: 0; transform: translateX(&#x2212;500px);  }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">25%,   45%  { opacity: 1; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">47% { opacity: 0; transform: translateX(&#x2212;500px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">48% { opacity: 0; transform: translateX(&#x2212;1000px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">50%,   70%  { opacity: 1; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">72% { opacity: 0; transform: translateX(&#x2212;1000px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">73% { opacity: 0; transform: translateX(&#x2212;1500px); }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">75%, 95%  { opacity: 1; }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">97% { opacity: 0; transform: translateX(&#x2212;1500px);  }</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">98% { opacity: 0; transform: translateX(&#x2212;2000px); }</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">100% { opacity: 1; transform: translateX(&#x2212;2000px); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Note that I&#x2019;m grouping keyframes that have the same properties in the same way you would group ordinary CSS selectors. Typically, however, you&#x2019;ll want to make the call on the animation longer to prevent it from appearing rushed. I&#x2019;d suggest using <Emphasis FontCategory="NonProportional">animation: slider 20s infinite</Emphasis>.</Para><Para Type="Programcode">Because the other images in the strip are not visible during the fade sequences, you can drop the final duplicate image on the end of the slider <Emphasis FontCategory="NonProportional">div</Emphasis>, running it back to the beginning in complete darkness before starting the animation again. That will not be possible in the next example.</Para></Section2><Section2 ID="Sec7"><Heading>Fade-In-Out During Motion<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary><Tertiary>Fade-In-Out, motion</Tertiary></IndexTerm></Heading><Para>You can retain the impression of a slider effect with a fade by fading the images out during their movement from left to right. While it&#x2019;s entirely possible to do this in a single keyframe animation, it&#x2019;s probably easiest to create the code as two sequences running simultaneously.</Para><Para>To achieve this, you revert to your original slider keyframe sequence, now running over 30 seconds, and add in a new <Emphasis FontCategory="NonProportional">fader</Emphasis> keyframe declaration (see Listing 6-9).</Para><Para><Emphasis Type="BoldItalic">Listing 6-9.</Emphasis>&#x2002;<Emphasis Type="Italic">CSS Code to Pause an Image Gallery Slideshow on hover</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes slider {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">0%  { transform: translateX(0px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">20% { transform: translateX(0px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">25% { transform: translateX(&#x2212;500px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">45% { transform: translateX(&#x2212;500px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">50% { transform: translateX(&#x2212;1000px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">70% { transform: translateX(&#x2212;1000px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">75% { transform: translateX(&#x2212;1500px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">95% { transform: translateX(&#x2212;1500px); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">100% { transform: translateX(&#x2212;2000px); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes fader {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">0% { opacity: 1; }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">70% { opacity: 1; }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">90% { opacity: 0; ease-out; }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">95% { opacity: 0; }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">100% { opacity: 1; ease-in; }</Emphasis></Para><Para Type="Programcode"> <Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip { width: 2500px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">animation: slider 30s infinite, fader 7.5s infinite; }</Emphasis></Para><Para>The philosophy behind the timing is simple: with a total animation length of 30 seconds, each image in the slide will appear fully on-screen for 6 seconds (20% of the animation time), and move to the left in 1.5 seconds (5% of the total time). By looping a second animation that fades out the <Emphasis FontCategory="NonProportional">imagestrip</Emphasis> element near the end over 7.5 seconds, you can merge the two to get a smooth result.</Para></Section2><Section2 ID="Sec8"><Heading>CrossFade<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary><Tertiary>CrossFade</Tertiary></IndexTerm></Heading><Para>To achieve a crossfade effect you have three options, but in all cases the images are no longer placed as a &#x201C;strip&#x201D;, but stacked one on top of the other, with the topmost image faded out in turn.</Para><Para>The first and easiest option is to simply set each background image as a keyframe for an otherwise empty (but correctly sized) element (see Listing 6-10).</Para><Para><Emphasis Type="BoldItalic">Listing 6-10.</Emphasis>&#x2002;<Emphasis Type="Italic">CSS code for a crossfade image slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes imageswap {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">0% { background-image: url(black-kite.jpg);  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">20% { background-image: url(red-kite.jpg);  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">40% { background-image: url(pelicans.jpg);  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">80% { background-image: url(pariah-kite.jpg);  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">100% { background-image: url(black-kite.jpg);  }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>This will simply and easily crossfade between the images; however, it may not give you the results or degree of control you are after. An alternative approach is to bring the images onto the page by using the crossfade filter, as shown in Listing 6-11.</Para><Para><Emphasis Type="BoldItalic">Listing 6-11.</Emphasis>&#x2002;<Emphasis Type="Italic">Alternative CSS Code for a Crossfade Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes slider {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">0%  { background-image: url(black-kite.jpg); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">20% { background-image: cross-fade(url(black-kite.jpg), url(red-kite.jpg),0%); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">25% { background-image: cross-fade(url(black-kite.jpg), url(red-kite.jpg),100%); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">45% { background-image: cross-fade(url(red-kite.jpg), url(pelicans.jpg),0%); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">50% { background-image: cross-fade(url(red-kite.jpg), url(pelicans.jpg),100%); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">70% { background-image: cross-fade(url(pelicans.jpg), url(pariah-kite.jpg),0%); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">75% { background-image: cross-fade(url(pelicans.jpg), url(pariah-kite.jpg),100%); }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">95% { background-image: cross-fade(url(pariah-kite.jpg), url(black-kite.jpg),0%); }</Emphasis></Para><Para Type="Programcode">   <Emphasis FontCategory="NonProportional">100% { background-image: cross-fade(url(pariah-kite.jpg), url(black-kite.jpg),100%); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>The third option, using &#x201C;real&#x201D; images, is slightly more complex: the topmost image must be faded out, then delayed before returning to the foreground. (Think of a deck of cards, with the transition taking place between the card on top and the one underneath before the first card is placed in a discard pile for a period of time.) The CSS becomes what&#x2019;s shown in Listing 6-12.</Para><Para><Emphasis Type="BoldItalic">Listing 6-12.</Emphasis>&#x2002;<Emphasis Type="Italic">Third Option CSS Code for a Crossfade Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes slider {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">0%, 25% { opacity: 1;  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">30%, 100% { opacity: 0;  }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">width: 500px; height: 400px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">background: #000; box-sizing: border-box; overflow: hidden;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">position: relative;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip img { position: absolute; top: 0; left: 0; }</Emphasis></Para><Para>The HTML also changes; note that I&#x2019;ve placed the images in <Emphasis Type="Italic">reverse</Emphasis> order in the new code (Listing 6-13). Positioned absolutely, the last image in the figure will be on top. (Alternatively, you could place an inline <Emphasis FontCategory="NonProportional">z-index</Emphasis> property on each).</Para><Para><Emphasis Type="BoldItalic">Listing 6-13.</Emphasis>&#x2002;<Emphasis Type="Italic">HTML Code for Third Option Crossfade Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;figure id=imagestrip&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;img src=black-kite.jpg alt=&quot;Photograph of a Black kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;img src=pariah-kite.jpg alt=&quot;Photograph of a Pariah kite&quot; style=&quot;animation: slider 10s 7.5s infinite;&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;img src=pelicans.jpg alt=&quot;Pelicans on moorings at sea &quot;style=&quot;animation: slider 10s 5s infinite;&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;img src=red-kite.jpg alt=&quot;Photograph of a Red kite&quot; style=&quot;animation: slider 10s 2.5s infinite;&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;img src=black-kite.jpg alt=&quot; Photograph of a Black kite&quot; style=&quot;animation: slider 10.1s 0s infinite;&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para>As each image in the keyframe sequence is &#x201C;solid&#x201D; for a quarter of the length of the animation, and the animation as a whole is ten seconds long, each subsequent call to the keyframe is delayed by an additional one-fourth of the total time. The extra time given to the first pass (the animation of the black kite) is provided so that the return of the photograph does not &#x201C;step on&#x201D; the fade into its substitute at the start of the figure.</Para></Section2><Section2 ID="Sec9"><Heading>Adding Captions<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary><Tertiary>adding captions </Tertiary></IndexTerm></Heading><Para>You can add captions to the slideshow in much the same way you did in the earlier examples with image transitions. The markup becomes that shown in Listing 6-14.</Para><Para><Emphasis Type="BoldItalic">Listing 6-14.</Emphasis>&#x2002;<Emphasis Type="Italic">HTML Code for an Image Slider with Captions</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div id=slideshow&#x003E;</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">&#x003C;figure id=imagestrip&#x003E;</Emphasis></Para><Para Type="Programcode">      <Emphasis FontCategory="NonProportional">&#x003C;figure&#x003E;</Emphasis></Para><Para Type="Programcode">         <Emphasis FontCategory="NonProportional">&#x003C;img src=black-kite.jpg alt=&quot;Black kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;figcaption&#x003E;Black kite&#x003C;/figcaption&#x003E;</Emphasis></Para><Para Type="Programcode">      <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">&#x003C;figure&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;img src=red-kite.jpg alt=&quot;Red kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;figcaption&#x003E;Red kite&#x003C;/figcaption&#x003E;</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">&#x003C;figure&#x003E;</Emphasis></Para><Para Type="Programcode">      <Emphasis FontCategory="NonProportional">&#x003C;img src=pelicans.jpg alt=Pelicans&#x003E;</Emphasis></Para><Para Type="Programcode">      <Emphasis FontCategory="NonProportional">&#x003C;figcaption&#x003E;Pelicans&#x003C;/figcaption&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;figure&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;img src=pariah-kite.jpg alt=&quot;Pariah kite&quot;&#x003E;</Emphasis></Para><Para Type="Programcode">        <Emphasis FontCategory="NonProportional">&#x003C;figcaption&#x003E;Pariah kite&#x003C;/figcaption&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode">  <Emphasis FontCategory="NonProportional">&#x003C;/figure&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para>To Listing 6-2 and 6-3 you add the markup shown in Listing 6-15.</Para><Para><Emphasis Type="Italic">Listing 6-15.&#x2002;CSS Code to Add Captions to an Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip figure figcaption {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">position: absolute; background: rgba(0,0,0,0.4);</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">color: #fff; width: 500px; padding: 8px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">font-size: 18px; top: -42px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">transition: 1s top linear;</Emphasis></Para><Para Type="Programcode">   <Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip:hover { animation-play-state:paused; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">figure#imagestrip figure:hover figcaption { top: 0; }</Emphasis></Para></Section2><Section2 ID="Sec10"><Heading>An On-Click Method for Pause<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary><Tertiary>On-Click method</Tertiary></IndexTerm></Heading><Para>You can also use the <Emphasis FontCategory="NonProportional">label</Emphasis> method discussed earlier to create an alternative method for pausing the slideshow animation by adding the code shown in Listing 6-16 just after the opening <Emphasis FontCategory="NonProportional">&#x003C;div&#x003E;</Emphasis> together with the associated CSS.</Para><Para><Emphasis Type="Italic">Listing 6-16.&#x2002;HTML and CSS Code to Add an On-Click Pause to an Image Slider</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;input type=checkbox id=pause&#x003E;&#x003C;label for=pause&#x003E;&#x003C;/label&#x003E;</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">label {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">display: block; z-index: 24; transition: 0.3s all ease-in-out;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">input:checked &#x223C; figure#imagestrip {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-play-state:paused;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">input#pause:checked &#x223C; label {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">background: rgba(0,0,0,0.4);</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">input#pause:checked &#x223C; label:before {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">content: &quot;&#x275A;&#x275A;&quot;; font-size: 200px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">color: rgba(255,255,255, 0.5);</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">position: relative;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">left: 160px; top: 80px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para>While the above is an option, keep in mind the accessibility issues discussed earlier in the chapter if you choose to employ it.</Para></Section2><Section2 ID="Sec11"><Heading>Creating a Fallback for Older Versions of Internet Explorer<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>altering image</Secondary><Tertiary>creating fallback</Tertiary></IndexTerm></Heading><Para>The <Emphasis FontCategory="NonProportional">overflow: hidden</Emphasis> part of the declaration will be read and followed by Internet Explorer (IE) 9 and earlier versions, although the keyframe animation will not. This will obscure the other images, meaning that users of IE before version 10 will not see them. This can be avoided with a conditional comment that delivers the visibility of the images to those users as shown in Listing 6-17. (Note that IE 6, 7, and 8 will require JavaScript and a little more CSS in order for the browsers to recognize HTML5 elements, such as <Emphasis FontCategory="NonProportional">&#x003C;figure&#x003E;</Emphasis>, discussed in Chapter 9.)</Para><Para><Emphasis Type="Italic">Listing 6-17.&#x2002;Conditional CSS to Make Images Viewable in an Earlier Versions of IE</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;!--[if lte IE 9]&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#slideshow { overflow: visible; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;![endif]--&#x003E;</Emphasis></Para></Section2></Section1><Section1 ID="Sec12"><Heading>A Caution Against Using Marquee Animation for Text<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>marquee for text</Secondary></IndexTerm></Heading><Para>The <Emphasis FontCategory="NonProportional">&#x003C;marquee&#x003E;</Emphasis> tag has a long and rather dismal history, going all the way back to early versions of Internet Explorer. Never a standardized element nor a part of any HTML spec, <Emphasis FontCategory="NonProportional">&#x003C;marquee&#x003E;</Emphasis> was commonly used to create a scrolling &#x201C;ticker tape&#x201D; effect for text on web pages during the late 90s. Together with animated GIFs and blinking text, <Emphasis FontCategory="NonProportional">&#x003C;marquee&#x003E;</Emphasis>, except in very specific contexts, became one of the hallmarks of bad web design.</Para><Para>While the naive designer might be tempted to use these techniques as a way of animating a text crawl, they should be avoided. Design trends aside, marquee text has a number of usability issues:<UnorderedList Mark="Bullet"><ItemContent><Para>The human visual system is attracted to movement and marquee text is in constant motion; a marquee feature can be extremely distracting on a page.</Para></ItemContent><ItemContent><Para>For the same reason, marquee text can be very difficult to read, especially for users with visual impairment.</Para></ItemContent><ItemContent><Para>Including links in marquee text makes a bad idea worse: links can be very difficult to follow and click. As marquee text moves in a loop, missing a link means that the user must wait until the next appearance of the link if they miss it the first time, which can be extremely frustrating. For that reason, any important links that appear in a marquee should also appear in a static form on the web page.</Para></ItemContent></UnorderedList></Para></Section1><Section1 ID="Sec13"><Heading>News Ticker/Notification Animation<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>News tickers/notification</Secondary></IndexTerm></Heading><Para>Rather than using marquee to animate text, in this section you&#x2019;ll create a news ticker sequence of alerts with CSS3 Animation. Each new notification will stack at the bottom-right corner of the page, displaying for a certain amount of time before disappearing. The user should be able to click each notification for more information, and the time remaining for each panel will be shown in a progress bar. (See Figure <InternalRef RefID="Fig2">6-2</InternalRef>.)<Figure ID="Fig2" Float="Yes" Category="Standard"><Caption Language="En"><CaptionNumber>Figure 6-2</CaptionNumber>.&#x2002;<CaptionContent><SimplePara><Emphasis Type="Italic">News ticker driven with CSS3</Emphasis></SimplePara></CaptionContent></Caption><MediaObject ID="MO2"><ImageObject FileRef="9781430247227_Fig06-02.gif" Format="GIF" Color="BlackWhite" Type="Linedraw" Rendition="HTML"/></MediaObject></Figure></Para><Para>The markup for this is fairly simple: the notifications are <Emphasis FontCategory="NonProportional">div</Emphasis> elements contained in a larger <Emphasis FontCategory="NonProportional">div</Emphasis>, with each progress bar as a <Emphasis FontCategory="NonProportional">div</Emphasis> with a <Emphasis FontCategory="NonProportional">span</Emphasis> inside it, as shown in Listing 6-18.</Para><FormalPara Type="Overview" RenderingStyle="Style1"><Heading>WHAT ABOUT THE PROGRESS ELEMENT?</Heading><Para>HTML5 has markup for displaying the time of a process: the <Emphasis FontCategory="NonProportional">&#x003C;progress&#x003E;</Emphasis> element. While you can style the progress element in the way you want, you cannot use CSS to modify the progress shown visually in the tag (that&#x2019;s JavaScript). Such a task is outside the bounds of this chapter, as we&#x2019;re using CSS3 for every feature where possible, so it is not an appropriate element to use in this case.</Para></FormalPara><Para><Emphasis Type="Italic">Listing 6-18.&#x2002;HTML for a CSS3-Driven Timed Notification System</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div id=breaking-news&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;div class=notification&#x003E;&#x003C;a href=#&#x003E;&#x003C;span&#x003E;&#x2602;&#x003C;/span&#x003E;Rain expected&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;div class=progress&#x003E;&#x003C;span&#x003E;&#x003C;/span&#x003E;&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div class=notification&#x003E;&#x003C;a href=#&#x003E;&#x003C;span&#x003E;</Emphasis>&#x2708;<Emphasis FontCategory="NonProportional">&#x003C;/span&#x003E;Travel plans changed&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;div class=progress&#x003E;&#x003C;span&#x003E;&#x003C;/span&#x003E;&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div class=notification&#x003E;&#x003C;a href=#&#x003E;&#x003C;span&#x003E;&#x2744;&#x003C;/span&#x003E;Light snow&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;div class=progress&#x003E;&#x003C;span&#x003E;&#x003C;/span&#x003E;&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para>The basic CSS to style the notifications is shown in Listing 6-19.</Para><Para><Emphasis Type="Italic">Listing 6-19.&#x2002;CSS for a Notification Alert Sequence</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#breaking-news {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">position: fixed; bottom: -20px; right: 15%;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">position: relative; width: 275px; border-radius: 10px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">background: linear-gradient(rgb(215,215,215), rgb(165,164,169));</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">padding: 60px 20px 40px; border: 2px solid #999;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">margin-top: 10px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">box-shadow: 3px 3px 6px rgba(0,0,0,0.1) inset, 0 0 6px 2px rgba(0,0,0,0.1);</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">opacity: 0.9;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification a {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">color: white; text-stroke: 1px solid #000;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">text-decoration: none; font-family: Futura, sans-serif; font-size: 20px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification a span {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">font-size: 60px; padding-right: 20px; vertical-align: middle;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.progress {</Emphasis></Para><Para Type="Programcode">     <Emphasis FontCategory="NonProportional">height: 5px; border-radius: 2px; border: 1px solid #999;</Emphasis></Para><Para Type="Programcode">     <Emphasis FontCategory="NonProportional">margin-top: 32px; background: rgb(215,215,215);</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.progress span {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">background: #000; display: block; width: 0; height: 3px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"> &#x2009;</Para><Para>There are three animation sequences: <Emphasis FontCategory="NonProportional">popup</Emphasis>, which drives each notification upwards; <Emphasis FontCategory="NonProportional">progress</Emphasis>, to show the time remaining; and <Emphasis FontCategory="NonProportional">fade</Emphasis>, to make each notification fade at the end. Each of these are shown in Listing 6-20.</Para><Para><Emphasis Type="Italic">Listing 6-20.&#x2002;CSS for a Notification Alert Sequence</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes popup {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">0%, 30% { height: 0; padding: 0 20px; display: none; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes fade {</Emphasis></Para><Para Type="Programcode">     <Emphasis FontCategory="NonProportional">100% { opacity: 0; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes progress {</Emphasis></Para><Para Type="Programcode">     <Emphasis FontCategory="NonProportional">100% { width: 100%; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Note that you&#x2019;re taking a slightly different approach with these keyframe sequences: because the default states for the elements were already defined in Listing 6-20, you&#x2019;re only using the keyframes to define the <Emphasis Type="Italic">from</Emphasis> state (in the case of popup) or the <Emphasis Type="Italic">to</Emphasis> state (in the case of progress and fade). The browser will automatically tween between these values and the default embedded, inline, and linked styles as appropriate. It&#x2019;s only when you include values for both 0% and 100% in your <Emphasis FontCategory="NonProportional">@keyframes</Emphasis> declaration that you control the entire appearance of the element (considerations of <Emphasis FontCategory="NonProportional">animation-fill-mode</Emphasis> aside).</Para><Para>All of the notification popups share the same animation, with the exception of the delay before the animation that is initialized for each popup. Working your CSS effectively means that you should put as much similar CSS as possible in a single declaration, as shown in Listing 6-21.</Para><Para><Emphasis Type="BoldItalic">Listing 6-21.</Emphasis>&#x2002;<Emphasis Type="Italic">Keyframe Sequences Called from a Single Shared Declaration</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">...</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-name: popup, fade;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-duration: 2s, 1s;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-timing-function: cubic-bezier(0.325, 0.730, 0.695, 1.650);</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-fill-mode: backwards, forwards;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-delay: 2s, 14s;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Without any contradictory statements, every notification panel will inherit all of the styles in Listing 6-21, but animation delay is the one thing you have to change for each (see Listing 6-22).</Para><Para><Emphasis Type="Italic">Listing 6-22.&#x2002;Setting Different Animation-Delay Values for Subsequent Notification Panels</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification:nth-child(2) {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">animation-delay: 6s, 18s;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification:nth-child(3) {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">animation-delay: 12s, 24s;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>You take a similar approach to the progress bar for each panel (Listing 6-23).</Para><Para><Emphasis Type="Italic">Listing 6-23.&#x2002;Setting Different Animation-Delay Values for Progress Bars</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.progress span {</Emphasis></Para><Para Type="Programcode">       <Emphasis FontCategory="NonProportional">background: #000; display: block; width: 0; height: 3px;</Emphasis></Para><Para Type="Programcode">       <Emphasis FontCategory="NonProportional">animation: progress 12s 4s forwards linear;</Emphasis></Para><Para Type="Programcode">       <Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification:nth-child(2) div.progress span { animation-delay: 6s; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div.notification:nth-child(3) div.progress span { animation-delay: 12s; }</Emphasis></Para><Para>Naturally, in the real world hand-crafting each notification in pure CSS3 would take a great deal of effort. As you will see in Chapter 9, you can use the basis of the work here to neatly integrate with JavaScript&#x2019;s strengths.</Para></Section1><Section1 ID="Sec14"><Heading>A Lightbox Image Gallery Equivalent in CSS3<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>lightbox gallery</Secondary></IndexTerm></Heading><Para><Emphasis Type="Italic">Lightbox</Emphasis> is a generic term for one of the first popular modal techniques used to display gallery images: the classical Lightbox effect is a fade-out of the page followed by an expansion and fade-in of the image at the center of the page. Its popularity led to overuse on the web, with many developers simply using the defaults that came with the code because of unfamiliarity or laziness. Writing the equivalent in CSS allows the developer to easily customize the appearance of the gallery to their requirements.</Para><Para>First, you&#x2019;ll use a very similar markup (Listing 6-24) to what you used for the first gallery example in Chapter 3. This time you&#x2019;ll use images provided by Robert Lowe, Jon Rawlinson and Camilo Rueda L&#x00F3;pez, licensed under Creative Commons (Figure <InternalRef RefID="Fig3">6-3</InternalRef>).<Figure ID="Fig3" Float="Yes" Category="Standard"><Caption Language="En"><CaptionNumber>Figure 6-3</CaptionNumber>.&#x2002;<CaptionContent><SimplePara><Emphasis Type="Italic">Large image zoomed in a CSS3-Lightbox equivalent</Emphasis></SimplePara></CaptionContent></Caption><MediaObject ID="MO3"><ImageObject FileRef="9781430247227_Fig06-03.gif" Format="GIF" Color="BlackWhite" Type="Linedraw" Rendition="HTML"/></MediaObject></Figure></Para><Para><Emphasis Type="Italic">Listing 6-24.&#x2002;HTML for a Lightbox Equivalent in CSS3</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;body id=base&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dl id=gallery&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;dt&#x003E;&#x003C;a href=#col1&#x003E;&#x003C;img src=coliseum-at-night-small.jpeg alt=&quot;Coliseum at night&quot;&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;dd id=col1&#x003E;&#x003C;a href=#&#x003E;&#x003C;img src=coliseum-at-night.jpeg alt=&quot;Coliseum at Night&quot; &#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;dt&#x003E;&#x003C;a href=#col2&#x003E;&#x003C;img src=coliseum-forum-small.jpeg alt=&quot;Roman Coliseum and Forum&quot;&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;dd id=col2&#x003E;&#x003C;a href=#&#x003E;&#x003C;img src=coliseum-forum.jpeg alt=&quot;Roman Coliseum and Forum&quot; &#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;dt&#x003E;&#x003C;a href=#col3&#x003E;&#x003C;img src=grand-via-madrid-small.jpeg alt=&quot;Grand Via, Madrid, Portugal&quot;&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">&#x003C;dd id=col3&#x003E;&#x003C;a href=#&#x003E;&#x003C;img src=grand-via-madrid.jpeg alt=&quot;Grand Via, Madrid, Portugal&quot; &#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para><Emphasis FontCategory="NonProportional">&#x003C;/dl&#x003E;</Emphasis></Para><Para>You need the <Emphasis FontCategory="NonProportional">dd</Emphasis> to be the full height and width of the page <Emphasis Type="Italic">and</Emphasis> to center its content. To do that, you&#x2019;ll place CSS on the HTML element itself, so that the <Emphasis FontCategory="NonProportional">dd</Emphasis> can measure itself relative to that, and use the flexbox module to center the child elements of the dd (Listing 6-25).</Para><Para><Emphasis Type="Italic">Listing 6-25.&#x2002;Base CSS for a Lightbox equivalent in CSS3</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">html { min-height: 100%; position: relative; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">body { margin: 0; height: 100%; margin-right: 2em;  }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery { float: left; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery  dt { width: 150px; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">margin-left: 0; background: rgba(0,0,0,0);</Emphasis></Para><Para Type="Programcode">   <Emphasis FontCategory="NonProportional">position: absolute; top: 0; bottom: 0;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">width: 100%; height: 100%;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">display: box; box-pack:center; box-align:center;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">visibility: hidden;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dd a { background: #fff; display: block; transition: 4s all ease-in; }</Emphasis></Para><Para>Note that there is a potential disadvantage to this approach if the page extends significantly past the bottom of the browser window, as this CSS will cause the image to always vertically center itself against the height of the body content.</Para><Para>To expand and show the <Emphasis FontCategory="NonProportional">dd</Emphasis> element, you&#x2019;ll animate the image with a keyframe sequence and fade the page by transitioning the background of the <Emphasis FontCategory="NonProportional">dd</Emphasis> (Listing 6-26).</Para><Para><Emphasis Type="Italic">Listing 6-26.&#x2002;Keyframe Sequence for a Lightbox Effect</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes blowup {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">0% { width: 0;  height: 0; opacity: 0;  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">30% { width: 640px; height: 0; opacity: 0;  }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">60% { width: 640px; height: 480px; opacity: 0; margin: 20px; }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">100% { width: 640px; height: 480px; opacity: 1; margin: 20px; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dd:target {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">visibility: visible; background: rgba(0,0,0,0.6);</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">transition: 2s background linear;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dd:target a { box-shadow: 0 0 8px 8px rgba(0,0,0,0.3); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dd:target a img { animation: blowup 3s forwards; }</Emphasis></Para><Para>By linking the content of the <Emphasis FontCategory="NonProportional">dd</Emphasis> to the <Emphasis FontCategory="NonProportional">id</Emphasis> for the <Emphasis FontCategory="NonProportional">body</Emphasis>, a click on the image will retarget the browser and undo the animation.</Para><Section2 ID="Sec15"><Heading>Adding Captions<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>lightbox gallery</Secondary><Tertiary>adding captions</Tertiary></IndexTerm></Heading><Para>There are a few options for adding captions to the Lightbox CSS3 code. The first adds a minimum amount to the existing code, as <Emphasis FontCategory="NonProportional">span</Emphasis> elements (Listing 6-27). The effect is shown in Figure <InternalRef RefID="Fig4">6-4</InternalRef>.</Para><Para><Emphasis Type="Italic">Listing 6-27.&#x2002;Keyframe Sequence for a Lightbox Effect</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dl id=gallery&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dt&#x003E;&#x003C;a href=#col1&#x003E;&#x003C;img src=coliseum-at-night-small.jpeg alt=&quot;Coliseum at night&quot;&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dd id=col1&#x003E;&#x003C;a href=#&#x003E;&#x003C;img src=coliseum-at-night.jpeg alt=&quot;Coliseum at Night&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span&#x003E;Coliseum at Night&#x003C;/span&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dt&#x003E;&#x003C;a href=#col2&#x003E;&#x003C;img src=coliseum-forum-small.jpeg alt=&quot;Roman Coliseum and Forum&quot;&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dd id=col2&#x003E;&#x003C;a href=#&#x003E;&#x003C;img src=coliseum-forum.jpeg alt=&quot;Roman Coliseum and Forum&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span&#x003E;Roman Coliseum and Forum&#x003C;/span&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dt&#x003E;&#x003C;a href=#col3&#x003E;&#x003C;img src=grand-via-madrid-small.jpeg alt=&quot;Via Grand, Madrid, Spain&quot;&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;dd id=col3&#x003E;&#x003C;a href=#&#x003E;&#x003C;img src=grand-via-madrid.jpeg alt=&quot;Grand Via, Madrid, Portugal&quot;&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span&#x003E;Grand Via, Madrid, Portugal&#x003C;/span&#x003E;&#x003C;/a&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/dl&#x003E;</Emphasis><Figure ID="Fig4" Float="Yes" Category="Standard"><Caption Language="En"><CaptionNumber>Figure 6-4</CaptionNumber>.&#x2002;<CaptionContent><SimplePara><Emphasis Type="Italic">Caption on mouseover for a large CSS Lightbox image</Emphasis><IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>lightbox gallery</Secondary><Tertiary>mouseover caption</Tertiary></IndexTerm></SimplePara></CaptionContent></Caption><MediaObject ID="MO4"><ImageObject FileRef="9781430247227_Fig06-04.gif" Format="GIF" Color="BlackWhite" Type="Linedraw" Rendition="HTML"/></MediaObject></Figure></Para><Para>By adding CSS to the <Emphasis FontCategory="NonProportional">dd</Emphasis> container, making it <Emphasis FontCategory="NonProportional">position: relative</Emphasis> and positioning the <Emphasis FontCategory="NonProportional">span</Emphasis> absolute within it, you can transition the caption in on hover (Listing 6-28).</Para><Para><Emphasis Type="Italic">Listing 6-28.&#x2002;CSS for a Caption on a Lightbox Gallery</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">float: left; font-family: Futura, Arial, sans-serif; margin-bottom: 12em;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">margin-left: 0; background: rgba(0,0,0,0);</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">position: absolute; top: 0; bottom: 0;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">width: 100%; height: 100%;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">display: box;  box-pack:center; box-align:center;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">visibility: hidden;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dt { width: 150px; margin: 2em 2em 0 2em; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dd:target { visibility: visible; background: rgba(0,0,0,0.6); transition: 2s background linear; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd a { background: #fff; display: block; text-decoration: none; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd a span {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">display: block; background-color: rgba(0,0,0,0.3); color: white;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">position: absolute; top: 20px; left: 20px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">padding: 10px; opacity: 0;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">transition: 1s opacity ease-in;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd a:hover span { opacity: 1;  }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd:target a img { animation: blowup 3s forwards; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">dl#gallery dd:target a {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">box-shadow: 0 0 8px 8px rgba(0,0,0,0.3);</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">transition: 4s all ease-in;  position: relative;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>CSS3 can also be used to animate a corporate logo on page load (see Figure <InternalRef RefID="Fig5">6-5</InternalRef>). I&#x2019;ll explore this topic more when we get to responsive design (Chapter 9). It&#x2019;s important to play the animation only once: a looping animation will cause a great deal of viewer distraction.</Para></Section2></Section1><Section1 ID="Sec16"><Heading>Logo Animation on Page Load<IndexTerm><Primary>CSS3 Keyframe Animations</Primary><Secondary>logo on page load</Secondary></IndexTerm></Heading><Para><Figure ID="Fig5" Float="Yes" Category="Standard"><Caption Language="En"><CaptionNumber>Figure 6-5</CaptionNumber>.&#x2002;<CaptionContent><SimplePara><Emphasis Type="Italic">A caption added to a corporate logo on page load</Emphasis></SimplePara></CaptionContent></Caption><MediaObject ID="MO5"><ImageObject FileRef="9781430247227_Fig06-05.gif" Format="GIF" Color="BlackWhite" Type="Linedraw" Rendition="HTML"/></MediaObject></Figure></Para><Para>As the iris components will not be animated, only the iris as a whole, you&#x2019;d normally create the logo as an image (possibly as an SVG vector file). For the purposes of illustration, we&#x2019;ll make it from pure CSS. (See Listing 6-29.)</Para><Para><Emphasis Type="Italic">Listing 6-29.&#x2002;HTML Markup for a Corporate Logo</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div id=container&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris1&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris2&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris3&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris4&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris5&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris6&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris7&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;span id=iris8&#x003E;&#x003C;/span&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;div id=iris&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;/div&#x003E;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">&#x003C;h1&#x003E;Avid &#x003C;span&#x003E;Laboratories&#x003C;/span&#x003E;&#x003C;/h1&#x003E;</Emphasis></Para><Para>To this you can add CSS to create the iris part of the logo, and style the text (Listing 6-30).</Para><Para><Emphasis Type="Italic">Listing 6-30.&#x2002;Basic CSS for a Corporate Logo</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">display: block; width: 100px; border: 7px solid white;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">height: 32px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">position: absolute; top: 90px; left: 90px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">background-color: #333;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">transform-origin: top right; z-index: -4;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#iris {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">border-radius: 50%; border: 30px solid #fff;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">width: 200px; height: 200px; position: relative;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris1 { transform: translate(&#x2212;35px, 55px) rotate(0deg);  }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris2 { transform: translate(&#x2212;70px, 90px) rotate(45deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris3 { transform: translate(&#x2212;130px, 70px) rotate(90deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris4 { transform: translate(&#x2212;160px, 20px) rotate(135deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris5 { transform: translate(&#x2212;145px, -35px) rotate(180deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris6 { transform: translate(&#x2212;95px, -60px) rotate(225deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris7 { transform: translate(&#x2212;45px, -45px) rotate(270deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container span#iris8 { transform: translate( &#x2212;20px, 5px) rotate(315deg); }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">h1 {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">font-family: &quot;Univers LT 55&quot;; text-transform: uppercase; font-size: 80px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">letter-spacing: 10px; position: absolute; top: 10px; left: 150px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">text-align: left; line-height: 50px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">h1 span {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">font-family: &quot;Univers CE 45 Light&quot;; font-size: 25px; display: block;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">letter-spacing: 20px; text-indent: 30px;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Finally, you can create the animation (Listing 6-31).</Para><Para><Emphasis Type="Italic">Listing 6-31.&#x2002;Keyframe Sequence for Corporate Logo Animation</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">@keyframes spinner {</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">0%   {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">transform: translate(800px,-25px) rotate(378deg); opacity: 0; }</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">100% { transform: translate(2px,-25px) rotate(&#x2212;56deg); opacity: 1; }</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">div#container {</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">position: relative; width: 200px; height: 200px;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-name: spin;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation-duration: 2s;</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">transform: rotate(&#x2212;18deg);</Emphasis></Para><Para Type="Programcode">    <Emphasis FontCategory="NonProportional">animation: spinner 1.5s 2s linear both;</Emphasis></Para><Para Type="Programcode"><Emphasis FontCategory="NonProportional">}</Emphasis></Para><Para>Note that you&#x2019;re not attaching the animation to any particular state, so the keyframe animation will run automatically on page load.</Para></Section1><Section1 ID="Sec17"><Heading>Summary</Heading><Para>In this chapter you&#x2019;ve explored uses of CSS3 Keyframes to create animations for image galleries and other page content. Keyframe sequences can include any form of complex motion that needs to be called at any time: on mouse click, page load, or another form of user interaction.</Para><Para>One issue that I have not addressed in animation so far is display scalability: the larger the elements in your sequences become, the harder the browser and GPU will have to work to transform, transition, and animate them. In addition, bitmap images are a big part of the total page size, slowing down connection speeds, especially on mobile devices. Neither do images respond well to scaling: doubling the DPI of the screen that your bitmap-based work is displayed on will result in image degradation.</Para><Para>In the next chapter, you&#x2019;ll look at a potential answer to all of these issues, in the form of SVG vector graphics integrated with CSS3.</Para></Section1></Body><BodyRef FileRef="9781430247227_06_OnlinePDF.pdf" TargetType="OnlinePDF"/></Chapter>